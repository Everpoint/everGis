<!DOCTYPE html>
<html>
<head>
    <title>sGis Framework - Creating Client Layer from ArcGis</title>
    <meta charset="UTF-8">
    <style>
        body, html {
            margin: 0px;
            overflow: hidden;
            height: 100%;
        }

        div#map {
            width: 100%;
            height: 100%;
        }
    </style>
    <script src="http://dev2.everpoint.ru/EverGIS/HTML5/005/evergis.js"></script>

</head>
<body>
    <!--
    Пример создания клиентского слоя из слоя ArcGis.
    -->
    <div id="map"></div>
    <script>
    window.onload = function() {

        var sp = new sGis.SpatialProcessor({
            url: 'http://dev2.everpoint.ru/eg_public/SpatialProcessor/IIS/', login: 'jspublic', password: 'jspublic',
            mapWrapper: 'map',
            services: ['osm', 'evergisjs_mrc_test']
        });

        sp.service.evergisjs_mrc_test.addListener('initialize', function() {
            sp.service.evergisjs_mrc_test.display = false;

            var clientLayer = sp.addController('clientLayer');
            clientLayer.copy({
                storageId: sp.service.evergisjs_mrc_test.layerInfo[2].LayerInfo.storageId,
                success: function() {
                    alert('Слой скопирован');
                }
            });

        });

    };
    </script>
</body>
</html>
