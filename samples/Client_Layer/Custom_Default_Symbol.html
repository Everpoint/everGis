<!DOCTYPE html>
<html>
<head>
    <title>sGis Framework - Point Symbolization</title>
    <meta charset="UTF-8">
    <style>
        body, html {
            margin: 0px;
            overflow: hidden;
            height: 100%;
        }

        div#map {
            width: 100%;
            height: 100%;
        }
    </style>
    <script src="http://dev2.everpoint.ru/EverGIS/HTML5/005/evergis.js"></script>

</head>
<body>
    <!--
    Пример символизации точечных объектов по двум параметрам.
    -->
    <div id="map"></div>
    <script>
        window.onload = function() {

            var sp = new sGis.SpatialProcessor({
                url: 'http://dev2.everpoint.ru/eg_public/SpatialProcessor/IIS/', login: 'jspublic', password: 'jspublic',
                mapWrapper: 'map',
                services: ['osm', 'evergisjs_mrc_test']
            });

            sp.service.evergisjs_mrc_test.addListner('initialize', function() {
                sp.service.evergisjs_mrc_test.display = false;

                var clientLayer = sp.addController('clientLayer');
                clientLayer.copy({
                    storageId: sp.service.evergisjs_mrc_test.layerInfo[0].LayerInfo.storageId,
                    success: function() {
                        applySymbolization();
                    }
                });

                function applySymbolization() {

                    clientLayer.getClassifiers({
                        geometryType: 'point',
                        propertyName: 'Size',
                        success: function(properties) {
                            properties[1].AttributeName = 'BPAAMOUNT';
                            properties[1].Settings.MinValue = 12;
                            properties[1].Settings.MaxValue = 36;
                            getSizeTable(properties[1]);
                        }
                    });

                    function getSizeTable(settings) {
                        clientLayer.buildClassifierTable({
                            geometryType: 'point',
                            settings: [settings],
                            success: function(table) {
                                applySymbolizer(table);
                            }
                        });
                    }

                    function applySymbolizer(table) {
                        var symbol = new sGis.symbol.point.Image({ source: base64Image, size: 16 })

                        clientLayer.applySymbolizer({
                            tables: {
                                point: [table]
                            },
                            
                            defaultSymbols: {
                                point: symbol
                            }
                        });
                    }
                }
            });

            var base64Image = "data:image/png;base64,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";

        };
    </script>
</body>
</html>
